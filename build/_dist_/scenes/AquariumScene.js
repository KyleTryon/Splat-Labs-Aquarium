import t from"../objects/creatures/Fish.js";import r from"../objects/consumables/fishFood.js";export class AquariumScene extends Phaser.Scene{constructor(){super({key:"AquariumScene"})}preload(){console.log("Loading Aquarium"),this.cameras.main.setBackgroundColor(9098211)}create(){this.creatures=new Phaser.GameObjects.Group(this),this.fishFood=new Phaser.GameObjects.Group(this),this.coins=new Phaser.GameObjects.Group(this),this.loadAquarium(),this.input.on("pointerdown",()=>{this.fishFood.add(new r({scene:this,x:this.input.x,y:this.input.y}))}),this.input.on("gameout",()=>{this.saveAquarium();const e=this.add.text(15,this.cameras.main.height-25,"Game Saved."),s=this.time.delayedCall(1e3,()=>{e.destroy()})})}update(e,s){this.creatures.getChildren().forEach(a=>{a.update(s)})}getRandomPoint(){let e=this.cameras.main.width-100,s=this.cameras.main.height-100,a=Math.random()*e,i=Math.random()*s;return new Phaser.Math.Vector2(a,i)}loadAquarium(){const e=JSON.parse(localStorage.getItem("saveFile"));e?(console.log("Save file: "),console.log(e),console.log("Aquarium loaded from save"),e.creatures.forEach(s=>{this.creatures.add(new t({scene:this,x:s.x,y:s.y,name:s.name,key:"fish_red"}))})):(this.creatures.add(new t({scene:this,x:0,y:0,key:"fish_red",lifespan:360,name:"Moby"})),this.creatures.add(new t({scene:this,x:0,y:0,key:"fish_red",lifespan:360,name:"Nemo"})),this.creatures.add(new t({scene:this,x:0,y:0,key:"fish_red",lifespan:360,name:"Lance"})),this.creatures.add(new t({scene:this,x:0,y:0,key:"fish_red",lifespan:360,name:"Jack"})))}saveAquarium(){let e={creatures:this.creatures.getChildren()};localStorage.setItem("saveFile",JSON.stringify(e)),console.log("Game Saved")}}
